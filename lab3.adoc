:diagram-use-plantuml:
:author: Залипаева Эвелина КЭ-201
:icon: front
:secttrue: true
:toc: left
:toclevels: 2
:secttruelevels: 2
:sectnums: |,all|
:stylesheet: custom.css
:stylesdir: ./styles
:imagesdir: pic
:toc:
:toc-title: Оглавление
:figure-caption: Рисунок
:table-caption: Таблица

include::test.adoc[]

== Что такое прерывание?

* Процессор работает как обычно
* Вдруг происходит событие (нажатие клавиши, таймер и т.д.)
* Процессор *срочно* откладывает текущую задачу
* Выполняет специальную программу (обработчик прерывания)
* Возвращается к прерванной работе

== Какие бывают прерывания?
1. *Аппаратные* (от устройств):
   - Клавиатура
   - Мышь
   - Таймер
   - Диск

2. *Программные* (вызванные программой):
   - Ошибки (деление на 0)
   - Системные вызовы

3. *Исключения* (проблемы в работе):
   - Обращение к запрещенной памяти
   - Неправильная команда

== Что происходит при прерывании?
1. Процессор запоминает где остановился
2. Переходит к специальной программе-обработчику
3. Обработчик делает что нужно (например, читает нажатую клавишу)
4. Возвращает процессор к прерванной задаче

== Важные особенности:
• Обработчики должны работать *быстро*
• Нельзя прерывать самих себя
• Есть приоритеты - какие прерывания важнее

== NVIC - это "диспетчер прерываний" в ARM-процессорах

1. *Что делает*:
   - Решает, какое прерывание важнее (приоритеты)
   - Включает/выключает прерывания
   - Отправляет процессору сигнал о прерывании

2. *Как работает*:
   - Есть таблица прерываний (каждому свой номер)
   - Для каждого прерывания можно:
     • Включить/выключить
     • Задать приоритет (0-255)
     • Указать обработчик

3. *Плюсы*:
   - Быстрая реакция (нет лишних проверок)
   - Можно делать "прерывания в прерываниях" (вложенные)
   - Экономит энергию (можно отключать ненужные)

== Таблица векторов прерываний 
Это массив адресов обработчиков прерываний, где каждый элемент соответствует определённому типу прерывания и указывает, куда процессору нужно перейти для его обработки.

== Что такое обработчик прерываний, как правильно обрабатывать прерывание.

=== Что это?
• Это функция, которую процессор вызывает при прерывании

=== Как правильно обрабатывать:
*Быстро*

   - Делать только самое необходимое
   - Долгие задачи оставлять для основной программы

*Безопасно*

   - Сохранить все регистры в начале (если нужно)
   - Не вызывать сложные функции 
   - Не делать бесконечных циклов

*Четко*

   - Определить причину прерывания
   - Обработать данные от устройства
   - Сбросить флаг прерывания


